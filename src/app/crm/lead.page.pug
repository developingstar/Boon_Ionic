nav-content
  nav-icons(right, currentPage="LeadPage")

ion-content(padding)
  button#back-button(ion-button, clear, (click)="goBack()")
    | < Back

  div(*ngIf="lead | async; let lead")
    h1 {{lead.name}}

    pipeline([stages]="stages | async", type="progress", [currentStageId]="lead.stage_id")

    .lead(*ngIf="formGroup | async; let form")
      .base-fields
        .fields-container
          field(type="input", [form]="form", formField="email", label="Email")
          field(type="input", [form]="form", formField="phone_number", label="Phone Number")
          field(type="select", [form]="form", formField="owner_id", label="Owner", [options]="owners | async")

        .buttons
          div(*ngIf="editMode | async; else editButton")
            button((click)="cancel()", ion-button, block, outline) Cancel
            button((click)="save(form.value)", [disabled]="!form.valid", ion-button, block) Save
          ng-template(#editButton)
            button((click)="edit()", ion-button, block) Edit

      hr

      .custom-fields
        h2 Details
        field(*ngFor="let field of (fields | async)",
              type="input",
              [form]="form",
              [formField]="field.id",
              [label]="field.name")
